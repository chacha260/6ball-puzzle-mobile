# 🕹️ 6-Ball Puzzle 説明書

このゲームは、**ヘックス（六角形）グリッド**を舞台にした落ち物パズルゲームです。上から落ちてくるボールの塊を操作し、同色のボールを**6個以上**連結させて消していくのが目的です。

## 1. 目的

スコアボード上部に設定された**ゲームオーバーライン**（赤い点線）を超えないようにボールを積み上げ、ボールを消して**高得点**を目指します。

## 2. 基本操作

| 操作内容 | PC | モバイル(未実装) |
| :--- | :--- | :--- |
| **左右移動** | $\text{A}$ / $\text{D}$ または $\text{ArrowLeft}$ / $\text{ArrowRight}$ | ◀ / ▶ |
| **時計回り回転** | $\text{E}$ | $\text{RotateCw}$ (時計回り) |
| **反時計回り回転** | $\text{Q}$ | $\text{RotateCcw}$ (反時計回り) |
| **ソフトドロップ** (ゆっくり落下) | $\text{S}$ または $\text{ArrowDown}$ | $\text{ArrowDown}$ (ソフトドロップ) |
| **ハードドロップ** (即時落下・固定) | $\text{W}$ または $\text{ArrowUp}$ | $\text{ArrowUp}$ (ハードドロップ) |
| **ゲーム開始/リセット** | スタート画面またはゲームオーバー画面のボタン | スタート画面またはゲームオーバー画面のボタン |

**💡 ピースの形状:**
落ちてくるピースは、**3個のボール**が三角形（▽または△）の形で連結した塊です。回転操作により、この2つの形状間でボールの配置が変わります。

## 3. ゲームルール

### 3.1. ボールの固定 (Lock)

落ちてくるピースが、グリッド下端または既に積まれている他のボールと衝突して動けなくなると、その位置でグリッドに固定されます。

* 奇数行と偶数行でボールの中心位置が半マス分ずれる**千鳥格子状**に配置されます。

### 3.2. マッチングと消去 (Match & Clear)

ボールが固定された後、以下のいずれかの条件を満たす同色のボールのグループ（連結成分）が見つかると、そのボールは消去されます。

1.  **通常マッチ:** 同色のボールが**6個以上**、隣接して連結している。

消去されるとスコアが加算され、その上にあるボールは重力に従って落下します。

### 3.3. 重力と落下 (Gravity & Physics)

ボールが消去された後、上にあるボールは落下します。ヘックスグリッドの特性上、落下は真下だけでなく、斜め下（左下または右下）の空いているマスに移動します。

**落下 $\rightarrow$ マッチ $\rightarrow$ 落下 $\rightarrow$ マッチ...** の連鎖が発生します。

### 3.4. 「役」と全消し

連結したグループが以下の形状を満たしている場合、高いボーナスポイントが加算されます。さらに、**その色のボールが盤面からすべて消去されます** (全消し)。

| 役名 | 形状と条件 | ポイント | 優先度 |
| :--- | :--- | :--- | :--- |
| **ヘキサゴン** | 任意の中心マスに対して、その周囲の**6マス**すべてが同じ色のボールで構成されている。 | **1000点** | 最優先 |
| **ピラミッド** | 同色のボールが**3段の三角形(ピラミッド/逆ピラミッド)** を構成している。 | **800点** | 高 |
| **ストレート** | 同色のボールが**6個以上**、横方向、または斜め（右下、左下）方向に直線状に並んでいる。| **500点** | 中 |

**消去スコア:**
* 基本:消去されたボール 1個につき $\text{100点}$ が加算されます。
* 役を作成した場合は、基本のスコアに加え、役に応じたポイントが加算されます。

## 4. ゲームオーバー

ボールがボードの最上部にある**ゲームオーバーライン**（赤い点線）を越えて積み上がってしまった場合、ゲームオーバーとなり、プレイ終了時の最終スコアが表示されます。

---

## 5. 補足情報: 実装予定(したい)機能！！

- 1画面2盤面でpvp
- ついでにAI対戦機能
- 対戦の際の役の効果の追加
- 役作成時の演出（現行よりもゆっくりめに）
